import{_ as W,r as i,o as $,e as c,f as t,j as a,k as P,l as m,u as o,t as f,m as v,x as k,y as _,F as j,q as H,b as d,N as z,s as G}from"./main-DQ80nIDV.js";import{c as J,a as U,b as p,u as K,d as M,M as Q,I as X,F as u,E as y,e as Y,f as Z}from"./index.esm-CHqXeMYD.js";import{C as ee}from"./CategorySelect-BG-ar260.js";import{L as te}from"./Loader-CAr-vM2i.js";import{F as le}from"./filter-value-service-DwU8wse-.js";import{I as se}from"./image-service-C_zkMTzW.js";import{M as ae}from"./manufactures-service-DQff2Eq5.js";import{A as oe}from"./accessory-service-BnGfbxde.js";import{_ as re}from"./SuccessNotification-BgkEVRjq.js";import{s as ie}from"./showNotification-BCRs6ctT.js";import{C as ne}from"./category-service-EQpJGvCC.js";import"./api-BLsDvcKO.js";const ue={class:"fixed left-0 top-0 h-screen w-64 bg-gray-800 text-white"},de={key:1,class:"ml-64 flex-1 p-4 w-full"},ce={class:"grid grid-cols-1 md:grid-cols-2 gap-4 border p-4 rounded-lg shadow-md"},me={class:"flex flex-col gap-2.5"},pe={class:"space-y-2"},ge={key:0,class:"text-red-500 text-sm"},ye={class:"space-y-2 col-span-2"},fe={key:0,class:"text-red-500 text-sm"},ve={class:"space-y-2"},be={class:"space-y-2"},xe={class:"space-y-2"},we={class:"flex flex-col gap-2.5"},Ve={class:"space-y-2"},ke={class:"space-y-2"},_e={class:"space-y-2"},Ie={class:"space-y-2"},he={class:"space-y-2"},Ce={key:0,class:"text-red-500 text-sm"},qe={class:"space-y-2"},Ae={key:0,class:"text-red-500 text-sm"},Ue={class:"space-y-2"},Me={class:"space-y-2"},Se={class:"col-span-2"},De={__name:"AcAddView",setup(Fe){const r=i({title:"",description:"",price:"",discount:"0",image_url:"",dimensions:"",weight:"",type:"",amount:"",manufacturer_id:null,category_id:null,subcategories:[6],images:[],filter_values:[]});let I=i(!1);const h=i([]),b=i([]),C=i([]),x=i([]),q=i(!1),S=i([]),D=i([]),w=i([]),F=J({title:U().required("Title is required"),description:U().required("Description is required"),price:p().typeError("Price must be a number").required("Price is required"),discount:p().typeError("Discount must be a number").required("Discount is required"),weight:p().typeError("Weight must be a number").required("Weight is required").notOneOf([0],"Weight cannot be 0"),amount:p().typeError("Amount must be a number").required("Amount is required"),manufacturer_id:p().nullable().required("Manufacturer is required"),category_id:p().nullable().required("Category is required")}),{handleSubmit:E,setFieldValue:Ee}=K({validationSchema:F,initialValues:{description:""},validateOnMount:!1}),T=async()=>{try{h.value=await le.getAllValues()}catch(s){console.error("Ошибка при загрузке подкатегорий:",s)}},L=async()=>{try{S.value=await ae.getAllManufactures()}catch(s){console.log(s)}},N=async()=>{try{D.value=await ne.getAllCategories()}catch(s){console.log(s)}},A=E(async s=>{try{const e={...s,description:R(s.description),images:[],subcategories:[6],filter_values:b.value.map(V=>V.id)};console.log(e),console.log(x),await oe.addAccessory(e),await ie(I),window.location.href="/accessories"}catch(e){w.value=e.response.data.errors}}),B=async()=>{try{C.value=await se.getAllImages()}catch(s){console.log(s)}},O={height:400,menubar:!1,plugins:["link","image","table","lists"],toolbar:"undo redo | formatselect | bold italic | alignleft aligncenter alignright | bullist numlist outdent indent | removeformat"},R=s=>{const e=document.createElement("div");return e.innerHTML=s,e.textContent||e.innerText||""};return M("required",s=>s==null||s===""?"This field could not be empty":!0),M("numeric",s=>/^\d+$/.test(s)?s==="0"||s===0?"Value cannot be 0":!0:"Only numbers are allowed"),$(async()=>{await T(),await L(),await N(),await B()}),(s,e)=>{const V=H("RouterLink");return d(),c(j,null,[t("nav",ue,[a(z)]),q.value?(d(),P(te,{key:0})):m("",!0),q.value?m("",!0):(d(),c("div",de,[e[25]||(e[25]=t("h2",{class:"text-xl font-semibold"},"Add accessory",-1)),t("div",ce,[t("div",me,[t("div",pe,[e[11]||(e[11]=t("label",{class:"block text-gray-700"},"Title",-1)),a(o(u),{name:"title",modelValue:r.value.title,"onUpdate:modelValue":e[0]||(e[0]=l=>r.value.title=l),class:"input-field w-full",type:"text",placeholder:"Title"},null,8,["modelValue"]),a(o(y),{name:"title",class:"text-red-500 text-sm"}),w.value.title?(d(),c("span",ge,f(w.value.title[0]),1)):m("",!0)]),t("div",ye,[e[12]||(e[12]=t("label",{class:"block text-gray-700"},"Description",-1)),a(o(u),{name:"description"},{default:v(({handleChange:l,errorMessage:n,value:g})=>[a(o(Y),{"api-key":"odcydkl28d7x03wgsip6dxzkqtcx5olxt496s6x1nu87870j",init:O,modelValue:g,"onUpdate:modelValue":l},null,8,["modelValue","onUpdate:modelValue"]),n?(d(),c("span",fe,f(n),1)):m("",!0)]),_:1})]),t("div",ve,[e[13]||(e[13]=t("label",{class:"block text-gray-700"},"Price",-1)),a(o(u),{name:"price",modelValue:r.value.price,"onUpdate:modelValue":e[1]||(e[1]=l=>r.value.price=l),class:"input-field w-full",type:"number",placeholder:"Price"},null,8,["modelValue"]),a(o(y),{name:"price",class:"text-red-500 text-sm"})]),t("div",be,[e[14]||(e[14]=t("label",{class:"block text-gray-700"},"Discount (%)",-1)),a(o(u),{name:"discount",modelValue:r.value.discount,"onUpdate:modelValue":e[2]||(e[2]=l=>r.value.discount=l),class:"input-field w-full",type:"number",placeholder:"Discount"},null,8,["modelValue"]),a(o(y),{name:"discount",class:"text-red-500 text-sm"})]),t("div",xe,[e[15]||(e[15]=t("label",{class:"block text-gray-700"},"Image URL",-1)),k(t("input",{"onUpdate:modelValue":e[3]||(e[3]=l=>r.value.image_url=l),class:"input-field w-full",type:"text",placeholder:"Image URL"},null,512),[[_,r.value.image_url]])])]),t("div",we,[t("div",Ve,[e[16]||(e[16]=t("label",{class:"block text-gray-700"},"Dimension",-1)),k(t("input",{"onUpdate:modelValue":e[4]||(e[4]=l=>r.value.dimensions=l),class:"input-field w-full",type:"text",placeholder:"Dimension"},null,512),[[_,r.value.dimensions]])]),t("div",ke,[e[17]||(e[17]=t("label",{class:"block text-gray-700"},"Weight",-1)),a(o(u),{name:"weight",modelValue:r.value.weight,"onUpdate:modelValue":e[5]||(e[5]=l=>r.value.weight=l),class:"input-field w-full",type:"text",placeholder:"Weight"},null,8,["modelValue"]),a(o(y),{name:"weight",class:"text-red-500 text-sm"})]),t("div",_e,[e[18]||(e[18]=t("label",{class:"block text-gray-700"},"Type",-1)),k(t("input",{"onUpdate:modelValue":e[6]||(e[6]=l=>r.value.type=l),class:"input-field w-full",type:"text",placeholder:"Accessory type"},null,512),[[_,r.value.type]])]),t("div",Ie,[e[19]||(e[19]=t("label",{class:"block text-gray-700"},"Amount left",-1)),a(o(u),{name:"amount",modelValue:r.value.amount,"onUpdate:modelValue":e[7]||(e[7]=l=>r.value.amount=l),class:"input-field w-full",type:"number",placeholder:"Amount"},null,8,["modelValue"]),a(o(y),{name:"amount",class:"text-red-500 text-sm"})]),t("div",he,[e[20]||(e[20]=t("label",{class:"block text-gray-700"},"Manufacturer",-1)),a(o(u),{name:"manufacturer_id"},{default:v(({field:l,errorMessage:n})=>[a(Z,{selectedManufacturerId:l.value,"onUpdate:selectedManufacturerId":[g=>l.value=g,l.onChange]},null,8,["selectedManufacturerId","onUpdate:selectedManufacturerId"]),n?(d(),c("span",Ce,f(n),1)):m("",!0)]),_:1})]),t("div",qe,[e[21]||(e[21]=t("label",{class:"block text-gray-700"},"Category",-1)),a(o(u),{name:"category_id"},{default:v(({field:l,errorMessage:n})=>[a(ee,{selectedCategoryId:l.value,"onUpdate:selectedCategoryId":[g=>l.value=g,l.onChange]},null,8,["selectedCategoryId","onUpdate:selectedCategoryId"]),n?(d(),c("span",Ae,f(n),1)):m("",!0)]),_:1})]),t("div",Ue,[e[22]||(e[22]=t("label",{class:"block text-gray-700"},"Filters",-1)),a(Q,{modelValue:b.value,"onUpdate:modelValue":e[8]||(e[8]=l=>b.value=l),options:h.value,multiple:!0,label:"name",text:"Choose filters"},null,8,["modelValue","options"])]),t("div",Me,[e[23]||(e[23]=t("label",{class:"block text-gray-700"},"Main Image",-1)),a(X,{images:C.value,selectedImages:x.value,"onUpdate:selectedImages":e[9]||(e[9]=l=>x.value=l)},null,8,["images","selectedImages"])])]),t("div",Se,[t("button",{onClick:e[10]||(e[10]=(...l)=>o(A)&&o(A)(...l)),class:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600"}," Save "),a(V,{to:"/accessories",class:"ml-4 text-blue-500 hover:underline"},{default:v(()=>e[24]||(e[24]=[G("Back")])),_:1})])])])),a(re,{isVisible:o(I)},null,8,["isVisible"])],64)}}},Ge=W(De,[["__scopeId","data-v-6e3490d3"]]);export{Ge as default};
