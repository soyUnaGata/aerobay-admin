import{r as i,o as L,e as a,f as t,j as f,k as R,l as p,m as U,v as h,x as d,y as k,F as u,n as v,z as _,u as M,B as V,q as T,b as s,N as j,s as E,t as F,C as D}from"./main-DQ80nIDV.js";import{L as G}from"./Loader-CAr-vM2i.js";import{F as $}from"./filter-service-BdCaxmS2.js";import{F as q}from"./filter-value-service-DwU8wse-.js";import{_ as z}from"./SuccessNotification-BgkEVRjq.js";import{s as A}from"./showNotification-BCRs6ctT.js";import"./api-BLsDvcKO.js";const I={class:"fixed left-0 top-0 h-screen w-64 bg-gray-800 text-white"},H={class:"ml-64 flex-1 p-4 w-full"},J={class:"flex items-baseline gap-12"},K={class:""},O={class:"mt-4"},P=["onUpdate:modelValue"],Q=["onClick"],W={class:""},X=["value"],Y={key:1,class:"text-sm text-red-600 mt-2"},Z=["value"],ee={key:3,class:"text-sm text-red-600 mt-2"},de={__name:"AddView",setup(te){D();const r=i({filter:{name:"",category_id:null,group_id:null,filter_values:[{value:""}]}});let y=i(!1);const n=i([]),g=i([]),b=i(!0),C=async()=>{try{const l=await V.get("https://aerobay.onrender.com/api/categories");n.value=l.data,console.log(n.value)}catch(l){console.error("Ошибка при загрузке категорий:",l)}finally{b.value=!1}},N=async()=>{try{const l=await V.get("https://aerobay.onrender.com/api/groups");g.value=l.data}catch(l){console.error("Ошибка при загрузке групп:",l)}},x=async()=>{try{const e=(await $.postFilter(r.value.name,r.value.category_id,r.value.group_id)).data.data.id;for(const m of r.value.filter.filter_values)await q.postFilter(m.value,e);await A(y)}catch(l){console.error("Ошибка при обновлении данных:",l)}window.location.href="/filters"},S=()=>{console.log(r.value),r.value.filter.filter_values.push({value:""})},B=l=>{r.value.filter.filter_values.splice(l,1)};return L(async()=>{await C(),await N()}),(l,e)=>{const m=T("RouterLink");return s(),a(u,null,[t("nav",I,[f(j)]),t("div",H,[b.value?(s(),R(G,{key:0})):p("",!0),f(m,{to:"/about"},{default:U(()=>e[3]||(e[3]=[E("Back")])),_:1}),t("div",J,[t("div",K,[t("form",{onSubmit:h(x,["prevent"])},[e[7]||(e[7]=t("label",{for:"filterName",class:"block text-sm font-medium leading-6 text-gray-900 mb-2"}," Filter name ",-1)),d(t("input",{type:"text",id:"filterName",class:"block rounded-md border-0 py-1.5 pl-7 pr-20 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6","onUpdate:modelValue":e[0]||(e[0]=o=>r.value.name=o),placeholder:"Enter filter name"},null,512),[[k,r.value.name]]),t("div",O,[e[6]||(e[6]=t("label",{for:"filterValues",class:"block text-sm font-medium leading-6 text-gray-900 mb-2"}," Filter values ",-1)),(s(!0),a(u,null,v(r.value.filter.filter_values,(o,c)=>(s(),a("div",{class:"relative flex gap-2.5 mt-2",name:"filterValues",key:c},[d(t("input",{type:"text",name:"filterValues","onUpdate:modelValue":w=>o.value=w,class:"block rounded-md border-0 py-1.5 pl-7 pr-20 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",placeholder:"Enter value"},null,8,P),[[k,o.value]]),c===r.value.filter.filter_values.length-1?(s(),a("button",{key:0,onClick:S,class:"inset-y-0 justify-center right-0 flex items-center px-3 bg-green-500 hover:bg-green-600 active:bg-green-700 text-white font-bold rounded-full w-8 h-8 shadow-lg transition transform hover:scale-110 active:scale-95"},e[4]||(e[4]=[t("span",{class:"text-lg"},"+",-1)]))):p("",!0),r.value.filter.filter_values.length-1?(s(),a("button",{key:1,type:"button",onClick:w=>B(c),class:"flex items-center justify-center w-8 h-8 bg-red-500 hover:bg-red-600 active:bg-red-700 text-white rounded-full shadow-lg transition transform hover:scale-110 active:scale-95"},e[5]||(e[5]=[t("span",{class:"text-lg"},"−",-1)]),8,Q)):p("",!0)]))),128))]),e[8]||(e[8]=t("button",{type:"submit",class:"mt-4 bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded"}," Save ",-1))],32)]),t("div",W,[t("form",{onSubmit:h(x,["prevent"])},[e[11]||(e[11]=t("label",{for:"category",class:"block text-sm font-medium leading-6 text-gray-900 mt-4 mb-2"}," Category ",-1)),n.value.data?d((s(),a("select",{key:0,id:"category","onUpdate:modelValue":e[1]||(e[1]=o=>r.value.category_id=o),class:"block w-full border-0 rounded-md border-gray-300 text-gray-900 ring-1 shadow-sm ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm py-1.5 pl-7 pr-20"},[e[9]||(e[9]=t("option",{value:"",disabled:"",selected:""},"Select category",-1)),(s(!0),a(u,null,v(n.value.data,o=>(s(),a("option",{key:o.id,value:o.id},F(o.name),9,X))),128))],512)),[[_,r.value.category_id]]):(s(),a("div",Y," There is no categories yet. ")),e[12]||(e[12]=t("label",{for:"group",class:"block text-sm font-medium leading-6 text-gray-900 mt-4 mb-2"}," Group ",-1)),g.value.data?d((s(),a("select",{key:2,id:"group","onUpdate:modelValue":e[2]||(e[2]=o=>r.value.group_id=o),class:"block w-full border-0 rounded-md border-gray-300 text-gray-900 ring-1 shadow-sm ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm py-1.5 pl-7 pr-20"},[e[10]||(e[10]=t("option",{value:"",disabled:"",selected:""},"Choose group",-1)),(s(!0),a(u,null,v(g.value.data,o=>(s(),a("option",{key:o.id,value:o.id},F(o.name),9,Z))),128))],512)),[[_,r.value.group_id]]):(s(),a("div",ee," There is no groups yet. "))],32)])])]),f(z,{isVisible:M(y)},null,8,["isVisible"])],64)}}};export{de as default};
