import{_ as w,r as l,c as k,g as x,o as D,G as I,b as n,e as c,f as g,t as v,H as f,x as S,y as L,F as B,n as T,l as b}from"./main-Cjdx7q60.js";import{C as E}from"./category-service-Dlw2mAj1.js";const N={props:{selectedCategoryId:{type:Number,default:null}},setup(d,{emit:s}){const a=l([]),t=l(null),r=l(!1),i=l(""),o=k(()=>a.value.filter(e=>e.name.toLowerCase().includes(i.value.toLowerCase()))),C=async()=>{try{const e=await E.getAllCategories();a.value=e.data.data,u(d.selectedCategoryId)}catch(e){console.error("Ошибка при загрузке категорий:",e)}},u=e=>{t.value=a.value.find(h=>h.id===e)},y=()=>{r.value=!r.value},_=e=>{r.value=!1,s("update:selectedCategoryId",e.id),u(e.id)};x(()=>d.selectedCategoryId,e=>{u(e)},{immediate:!0});const m=e=>{p.value.contains(e.target)||(r.value=!1)},p=l(null);return D(()=>{C(),document.addEventListener("click",m)}),I(()=>{document.removeEventListener("click",m)}),{categories:a,selectedCategory:t,selectContainer:p,isOpen:r,searchTerm:i,filteredCategories:o,toggleDropdown:y,selectCategory:_}}},O={class:"manufacturer-select",ref:"selectContainer"},V={key:0},F={key:1,class:"placeholder"},M={key:0,class:"dropdown"},U=["onClick"];function z(d,s,a,t,r,i){return n(),c("div",O,[g("div",{class:"selected-manufacturer",onClick:s[0]||(s[0]=(...o)=>t.toggleDropdown&&t.toggleDropdown(...o))},[t.selectedCategory?(n(),c("span",V,v(t.selectedCategory.name),1)):(n(),c("span",F,"Select category...")),g("span",{class:f(["dropdown-arrow",{open:t.isOpen}])},"▼",2)]),t.isOpen?(n(),c("div",M,[S(g("input",{type:"text","onUpdate:modelValue":s[1]||(s[1]=o=>t.searchTerm=o),placeholder:"Search...",class:"search-input"},null,512),[[L,t.searchTerm]]),(n(!0),c(B,null,T(t.filteredCategories,o=>(n(),c("div",{key:o.id,class:f(["cursor-pointer px-4 py-2 hover:bg-indigo-500 hover:text-white",["option",o.id===a.selectedCategoryId?"selected":""]]),onClick:C=>t.selectCategory(o)},v(o.name),11,U))),128))])):b("",!0)],512)}const H=w(N,[["render",z],["__scopeId","data-v-f7134652"]]);export{H as C};
