import{_ as L,r as n,E as N,o as B,e as f,f as t,j as s,k as T,l as g,u as l,m as b,F as R,q as P,b as d,N as $,t as w,s as G}from"./main-Cjdx7q60.js";import{c as j,a as I,b as c,u as H,M as O,I as z,F as i,E as m,e as J,f as K}from"./index.esm-isJXD0Mt.js";import{L as Q}from"./Loader-gPqh9Pz8.js";import{F as W}from"./filter-value-service-DxA5ilxP.js";import{I as X}from"./image-service-DBf-nwwY.js";import{M as Y}from"./manufactures-service-TeBxyKtG.js";import{_ as Z}from"./SuccessNotification-CWTHgcNT.js";import{s as ee}from"./showNotification-BCRs6ctT.js";import{G as te}from"./GroupSelect-31pwFiN9.js";import{D as se}from"./drone-service-rX4Utn3a.js";import"./api-DS0brFyY.js";import"./group-service-Bk1HCOyh.js";const ae={class:"fixed left-0 top-0 h-screen w-64 bg-gray-800 text-white"},le={class:"ml-64 flex-1 p-4 w-full"},oe={class:"grid grid-cols-1 md:grid-cols-2 gap-4 border p-4 rounded-lg shadow-md"},re={class:"flex flex-col gap-2.5"},ne={class:"space-y-2"},ie={class:"space-y-2 col-span-2"},ue={key:0,class:"text-red-500 text-sm"},de={class:"space-y-2"},ce={class:"space-y-2"},me={class:"space-y-2"},pe={class:"flex flex-col gap-2.5"},fe={class:"space-y-2"},ge={class:"space-y-2"},be={key:0,class:"text-red-500 text-sm"},ve={class:"space-y-2"},xe={key:0,class:"text-red-500 text-sm"},ye={class:"space-y-2"},_e={class:"space-y-2"},we={class:"col-span-2"},ke={__name:"DronesAddView",setup(Ve){let v=n(!1);const k=n([]),x=n([]),V=n([]),y=n([]),q=n(!1),D=n([]),_=n([]),M=j({title:I().required("Title is required"),description:I().required("Description is required"),price:c().typeError("Price must be a number").required("Price is required"),discount:c().typeError("Discount must be a number").required("Discount is required"),amount:c().typeError("Amount must be a number").required("Amount is required"),manufacturer_id:c().nullable().required("Manufacturer is required"),group_id:c().nullable().required("Category is required")}),{handleSubmit:S,setFieldValue:he}=H({validationSchema:M,initialValues:{title:"",description:"",price:null,discount:null,amount:null,manufacturer_id:null,subcategories:[6],group_id:null,image_url:"",filter_values:[]},validateOnMount:!1}),F=async()=>{try{k.value=await W.getAllValues()}catch(o){console.error(o)}},A=async()=>{try{D.value=await Y.getAllManufactures()}catch(o){console.log(o)}},h=S(async o=>{try{_.value={};const e={...o,description:C(o.description),images:y.value,filter_values:N(x.value).map(a=>a.id)},p=await se.addDrone(e);p.success?(v.value=!0,await ee(v),window.location.href="/drones"):_.value=p.error}catch(e){_.value=e.response.data.errors}}),E=async()=>{try{V.value=await X.getAllImages()}catch(o){console.log(o)}},U={height:400,menubar:!1,plugins:["link","image","table","lists"],toolbar:"undo redo | formatselect | bold italic | alignleft aligncenter alignright | bullist numlist outdent indent | removeformat"},C=o=>{const e=document.createElement("div");return e.innerHTML=o,e.textContent||e.innerText||""};return B(async()=>{await F(),await A(),await E()}),(o,e)=>{const p=P("RouterLink");return d(),f(R,null,[t("nav",ae,[s($)]),t("div",le,[q.value?(d(),T(Q,{key:0})):g("",!0),e[14]||(e[14]=t("h2",{class:"text-xl font-semibold"},"Add drone",-1)),t("div",oe,[t("div",re,[t("div",ne,[e[3]||(e[3]=t("label",{class:"block text-gray-700"},"Title",-1)),s(l(i),{name:"title",class:"input-field w-full",type:"text",placeholder:"Drone name"}),s(l(m),{name:"title",class:"text-red-500 text-sm"})]),t("div",ie,[e[4]||(e[4]=t("label",{class:"block text-gray-700"},"Description",-1)),s(l(i),{name:"description"},{default:b(({handleChange:a,errorMessage:r,value:u})=>[s(l(J),{"api-key":"odcydkl28d7x03wgsip6dxzkqtcx5olxt496s6x1nu87870j",init:U,modelValue:u,"onUpdate:modelValue":a},null,8,["modelValue","onUpdate:modelValue"]),r?(d(),f("span",ue,w(r),1)):g("",!0)]),_:1})]),t("div",de,[e[5]||(e[5]=t("label",{class:"block text-gray-700"},"Price",-1)),s(l(i),{name:"price",class:"input-field w-full",type:"number",placeholder:"Price"}),s(l(m),{name:"price",class:"text-red-500 text-sm"})]),t("div",ce,[e[6]||(e[6]=t("label",{class:"block text-gray-700"},"Discount (%)",-1)),s(l(i),{name:"discount",class:"input-field w-full",type:"number",placeholder:"Discount"}),s(l(m),{name:"discount",class:"text-red-500 text-sm"})]),t("div",me,[e[7]||(e[7]=t("label",{class:"block text-gray-700"},"Image URL",-1)),s(l(i),{name:"image_url",class:"input-field w-full",type:"text",placeholder:"Image URL"}),s(l(m),{name:"image_url",class:"text-red-500 text-sm"})])]),t("div",pe,[t("div",fe,[e[8]||(e[8]=t("label",{class:"block text-gray-700"},"Amount",-1)),s(l(i),{name:"amount",class:"input-field w-full",type:"number",placeholder:"Amount"}),s(l(m),{name:"amount",class:"text-red-500 text-sm"})]),t("div",ge,[e[9]||(e[9]=t("label",{class:"block text-gray-700"},"Manufacturer",-1)),s(l(i),{name:"manufacturer_id"},{default:b(({field:a,errorMessage:r})=>[s(K,{selectedManufacturerId:a.value,"onUpdate:selectedManufacturerId":[u=>a.value=u,a.onChange]},null,8,["selectedManufacturerId","onUpdate:selectedManufacturerId"]),r?(d(),f("span",be,w(r),1)):g("",!0)]),_:1})]),t("div",ve,[e[10]||(e[10]=t("label",{class:"block text-gray-700"},"Group",-1)),s(l(i),{name:"group_id"},{default:b(({field:a,errorMessage:r})=>[s(te,{modelValue:a.value,"onUpdate:modelValue":[u=>a.value=u,a.onChange]},null,8,["modelValue","onUpdate:modelValue"]),r?(d(),f("span",xe,w(r),1)):g("",!0)]),_:1})]),t("div",ye,[e[11]||(e[11]=t("label",{class:"block text-gray-700"},"Filters",-1)),s(O,{modelValue:x.value,"onUpdate:modelValue":e[0]||(e[0]=a=>x.value=a),options:k.value,multiple:!0,label:"name",placeholder:"Choose filters"},null,8,["modelValue","options"])]),t("div",_e,[e[12]||(e[12]=t("label",{class:"block text-gray-700"},"Main Image",-1)),s(z,{images:V.value,selectedImages:y.value,"onUpdate:selectedImages":e[1]||(e[1]=a=>y.value=a)},null,8,["images","selectedImages"])])]),t("div",we,[t("button",{onClick:e[2]||(e[2]=(...a)=>l(h)&&l(h)(...a)),class:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600"}," Save "),s(p,{to:{name:"drones"},class:"ml-4 text-blue-500 hover:underline"},{default:b(()=>e[13]||(e[13]=[G("Back")])),_:1})])])]),s(Z,{isVisible:l(v)},null,8,["isVisible"])],64)}}},Be=L(ke,[["__scopeId","data-v-484d263d"]]);export{Be as default};
