import{r as d,O as k,o as N,e as c,f as e,j as v,k as V,l as b,F as x,n as D,b as l,N as B,t as y}from"./main-C_11dBjN.js";import{L as E}from"./Loader-CKVVMDD7.js";import{C as n}from"./category-service-Dq39Gxa9.js";import{_ as O}from"./Modal-CjcVtrI7.js";import"./api-2mOM-9YQ.js";import"./portal-qxOlFC70.js";const $={class:"fixed left-0 top-0 h-screen w-64 bg-gray-800 text-white"},A={class:"w-screen"},L={key:0,class:"flex-1 p-4 w-full"},M={class:"ml-64 flex-1 p-4 w-full"},S={class:"overflow-hidden rounded-lg shadow-lg w-full mt-6"},j={class:"min-w-full bg-white border border-gray-200 rounded-lg"},F={class:"ppy-3 px-4 text-gray-700"},U={class:"ppy-3 px-4 text-gray-700 w-1/4"},I={class:"ppy-3 px-4 text-gray-700 w-5/6 max-w-[300px] max-h-[60px] overflow-hidden text-ellipsis whitespace-nowrap"},q={class:"ppy-3 px-4 space-x-2 flex w-1/6"},z=["onClick"],G=["onClick"],W={__name:"CategoryView",setup(H){const u=d(!0),p=d([]),i=d(!1),o=k({name:"",description:"",id:null}),r=d(!1),m=async()=>{try{p.value=await n.getAllCategories(),console.log(p.value)}catch(a){console.log(a)}finally{u.value=!1}},w=()=>{r.value=!1,o.name="",o.description="",o.id=null,i.value=!0},h=async a=>{const t=await n.getCategory(a);t&&(o.id=t.id,o.name=t.name,o.description=t.description,r.value=!0,i.value=!0)},_=async(a,t)=>{const s={name:o.name,description:o.description},f={name:a,description:t};try{r.value?await n.updateCategory(o.id,s):(console.log(s),await n.addCategory(f)),i.value=!1,await m()}catch(g){console.log(g)}},C=async a=>{await n.removeCategory(a),await m()};return N(async()=>{await m()}),(a,t)=>(l(),c(x,null,[e("nav",$,[v(B)]),e("div",A,[u.value?(l(),V(E,{key:0})):b("",!0)]),u.value?b("",!0):(l(),c("div",L,[e("div",M,[e("div",{class:"justify-end flex"},[e("button",{onClick:w,class:"rounded-md bg-indigo-600 px-3.5 py-2.5 text-sm font-semibold text-white shadow-xs hover:bg-indigo-500 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"}," Add ")]),e("div",S,[e("table",j,[t[3]||(t[3]=e("thead",null,[e("tr",{class:"bg-gray-50 text-left text-gray-600"},[e("th",{class:"ppy-3 px-4 border-b font-semibold"},"#"),e("th",{class:"py-3 px-4 border-b font-semibold"},"Name"),e("th",{class:"py-3 px-4 border-b font-semibold"},"Description"),e("th",{class:"py-3 px-4 border-b font-semibold"},"Actions")])],-1)),e("tbody",null,[(l(!0),c(x,null,D(p.value,(s,f)=>(l(),c("tr",{key:s.id,class:"hover:bg-gray-100 transition duration-200 ease-in-out border-b"},[e("td",F,y(f+1),1),e("td",U,y(s.name),1),e("td",I,y(s.description),1),e("td",q,[e("button",{onClick:g=>h(s.id),class:"bg-blue-500 hover:bg-blue-600 text-white py-1 px-3 rounded-full transition ease-in-out duration-150"}," Edit ",8,z),e("button",{onClick:g=>C(s.id),class:"bg-red-500 hover:bg-red-600 text-white py-1 px-3 rounded-full transition ease-in-out duration-150"}," Delete ",8,G)])]))),128))])])])]),v(O,{title:r.value?"Edit Category":"New Category",modelValue:o.name,"onUpdate:modelValue":t[0]||(t[0]=s=>o.name=s),modelDescription:o.description,"onUpdate:modelDescription":t[1]||(t[1]=s=>o.description=s),isOpen:i.value,onSaveItem:_,onCloseModal:t[2]||(t[2]=s=>i.value=!1)},null,8,["title","modelValue","modelDescription","isOpen"])]))],64))}};export{W as default};
